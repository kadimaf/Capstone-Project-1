<h2 mat-dialog-title>Add New Contribution</h2>
<mat-dialog-content [formGroup]="contributionForm">
    <!-- <mat-form-field appearance="fill">
        <mat-label>Member ID</mat-label>
        <input matInput formControlName="memberId" required />
    </mat-form-field> -->
    <!-- ðŸŒŸ Searchable Member Dropdown -->
    <mat-form-field appearance="fill">
        <mat-label>Select Member</mat-label>
        <mat-select formControlName="memberId">
            <mat-select-trigger>
                {{ getSelectedMemberName() || 'Select Member' }}
            </mat-select-trigger>

            <!-- Search box inside dropdown -->
            <mat-option>
                <input type="text" placeholder="Search members" [(ngModel)]="memberSearch" [ngModelOptions]="{ standalone: true }"
                    (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()" class="member-search-box" />
            </mat-option>

            <!-- Filtered member list -->
            <mat-option *ngFor="let member of filteredMembers" [value]="member.id">
                {{ member.firstName }} {{ member.lastName }} ({{ member.memberId }})
            </mat-option>
        </mat-select>
    </mat-form-field>


    <mat-form-field appearance="fill">
        <mat-label>Amount</mat-label>
        <input matInput type="number" formControlName="amount" required />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="description"></textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Type</mat-label>
        <mat-select formControlName="type" required>
            <mat-option *ngFor="let type of ContributionType" [value]="type">{{ type }}</mat-option>
        </mat-select>
    </mat-form-field>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close (click)="onCancel()">Cancel</button>
    <button mat-flat-button color="primary" (click)="submit()" [disabled]="contributionForm.invalid">Save</button>
</mat-dialog-actions>